{% extends "app/layout.html" %}

{% block content %}

<h2>{{ title }}</h2>
<h3>{{ message }}</h3>

<!-- Conteúdo Central - Centro - Inicio -->
    <div id="page-wrapper">


        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Teste por Velocidade Fixa</h1>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Informações básicas
                    </div>
                    <div class="panel-body">
                        <form role="form" method="POST" name="FrmRecurso" autocomplete="off">
                                {%csrf_token %}
                                <p><label for="id_amortecedor_codigo">Código:</label> <input id="id_amortecedor_codigo" maxlength="45" name="amortecedor_codigo" type="text" /></p>
                                <p><label for="id_amortecedor_diametro_externo">Tamanho do Diâmetro Externo:</label> <input id="id_amortecedor_diametro_externo" name="amortecedor_diametro_externo" type="number" /></p>
                                <p><label for="id_amortecedor_curso">Tamanho do Curso:</label> <input id="id_amortecedor_curso" name="amortecedor_curso" type="number" /></p>
                                {{form.as_p}}
                                 <!--<div class="">
                                    <div class="form-group">
                                        Nome:
                                        <input text class="form-control" id="nome" name="nome" required ></text>
                                    </div>
                                    <div class="form-group">
                                        Observacoes:
                                        <textarea class="form-control" rows="5" cols="150" id="observacoes" name="observacoes" ></textarea>
                                    </div>
                                      {%csrf_token %}
                                    <div class="form-group">
                                        Tempo (minutos):
                                        <input class="form-control" type="number" name="tempo" min="1" max="10" step="1" value="1" required/> 
                                    </div>
                               
                                </div>-->
                                    <div class="">
                                        <input id="btnCriarNovaQuestao" class="btn btn-primary" type="submit" name="enviar" value="Iniciar" >
                                    </div>
                         </form>
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>

        <div class="row">
            <div class="col-lg-8">
                   
            </div>
        </div>
    </div>
    <!-- /#page-wrapper -->
<!-- Conteúdo Central - Centro - Fim -->


{% endblock %}

{% block scripts %}

<script>

$.ajax({
    url: "/json/nomeAmortecedor",
    success: function(json) {
        
        
        $(function() {
         var availableTags = ['12','45','as','ter'];
   
     $( "#id_amortecedor_codigo" ).autocomplete({
      source: json.nomes,
      close: function(){
                    this.blur();
     }
    });
  });
        
        
    }
});


  



$("#id_amortecedor_codigo").blur(function(){
 // Para fazer a consulta, removemos tudo o que não é número do valor informado pelo usuário
 var ar = this.value;

 var url = "/json/amortecedor/"+ar;
 
$.getJSON(url, function(dadosRetorno){
                                             try{
                                             // Insere os dados em cada campo
                                             $("#id_amortecedor_diametro_externo").val(dadosRetorno.amortecedor_diametro_externo);
                                             $("#id_amortecedor_curso").val(dadosRetorno.amortecedor_curso);
                                             $("#id_amortecedor_diametro_externo").prop('disabled', true);
                                             $("#id_amortecedor_curso").prop('disabled', true);
                                             if (dadosRetorno.erro) {
                                                 $("#id_amortecedor_diametro_externo").prop('disabled', false);
                                                 $("#id_amortecedor_curso").prop('disabled', false);
                                             }
                                            

                                             }catch(ex){
                                             
                                             }
                                             });
 });


</script>



{% endblock %}
