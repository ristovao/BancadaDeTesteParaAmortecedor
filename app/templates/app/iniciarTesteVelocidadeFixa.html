{% extends "app/layout.html" %}


{% block content %}

<h2>{{ title }}</h2>
<h3>{{ message }}</h3>

<!-- Conteúdo Central - Centro - Inicio -->
    <div id="page-wrapper">


        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Teste por Velocidade Fixa</h1>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Informações básicas
                    </div>
                    <div class="panel-body">
                        <form role="form" method="POST" name="FrmRecurso" autocomplete="off">
                                {%csrf_token %}
                                
                                <!-- Formulário do Amortecedor -->
                                {{formArm.non_field_errors}}
                                <h4 class="page-header">Amortecedor</h4>

                                <div class="form-group row">
                                {{formArm.amortecedor_codigo.errors}}
                                    <label class="col-sm-2 form-control-label" for="id_amortecedor_codigo">Código:</label>
                                    <div class="col-sm-2">
                                        <input class="form-control" id="id_amortecedor_codigo" maxlength="45" name="amortecedor_codigo" type="text" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                    {{ form.amortecedor_diametro_externo.errors }}
                                    <label class="col-sm-2 form-control-label" for="id_amortecedor_diametro_externo">Tamanho do Diâmetro Externo:</label>
                                    <div class="col-sm-1">
                                        <input class="form-control" id="id_amortecedor_diametro_externo" name="amortecedor_diametro_externo" type="number" value="1"/>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    {{ form.amortecedor_curso.errors }}
                                    <label class="col-sm-2 form-control-label" for="id_amortecedor_curso">Tamanho do Curso:</label>
                                    <div class="col-sm-1">
                                        <input class="form-control" id="id_amortecedor_curso" name="amortecedor_curso" type="number" value="1"/>
                                    </div>
                                </div>

                                <!-- Formulário do Teste -->
                                {{ form.non_field_errors }}
                                <h4 class="page-header">Teste</h4>
    
                                <div class="form-group row">
                                    {{ form.teste_nome.errors }}
                                    <label class="col-sm-2 form-control-label" for="id_teste_nome">Nome:</label>
                                    <div class="col-sm-5">
                                        <input class="form-control" id="id_teste_nome" maxlength="45" name="teste_nome" type="text" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                 {{ form.teste_quantidade_ciclo.errors }}
                                    <label class="col-sm-2 form-control-label" for="id_teste_quantidade_ciclo">Quantidade de Ciclo:</label>
                                    <div class="col-sm-1">
                                        <input class="form-control" id="id_teste_quantidade_ciclo" name="teste_quantidade_ciclo" type="number" value="5" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                 {{ form.testeVF_velocidade.errors }}
                                    <label class="col-sm-2 form-control-label" for="id_testeVF_velocidade">Velocidade do Motor:</label>
                                    <div class="col-sm-1">
                                        <input class="form-control" id="id_testeVF_velocidade" name="testeVF_velocidade" type="number" value="5" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                {{ form.teste_observacoes.errors }}

                                    <label class="col-sm-2 form-control-label" for="id_teste_observacoes">Observações:</label>
                                    <div class="col-sm-5">
                                        <textarea cols="40" id="id_teste_observacoes" maxlength="255" name="teste_observacoes" rows="10" class="form-control">
                                        </textarea>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <input id="btnCriarNovaQuestao" class="btn btn-primary" type="submit" name="enviar" value="Iniciar" >
                                    </div>
                                </div>
                        </form>
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>

        <div class="row">
            <div class="col-lg-8">
                   
            </div>
        </div>
    </div>
    <!-- /#page-wrapper -->
<!-- Conteúdo Central - Centro - Fim -->


{% endblock %}

{% block scripts %}

<script>

    $.ajax({
        url: "/json/nomeAmortecedor",
        success: function(json) {
            $(function() {
                var availableTags = ['12','45','as','ter'];
       
                $( "#id_amortecedor_codigo" ).autocomplete({
                    source: json.nomes,
                    close: function(){
                        this.blur();
                    }
                });
            });
        }
    });

    $("#id_amortecedor_codigo").blur(function(){
         // Para fazer a consulta, removemos tudo o que não é número do valor informado pelo usuário
         var ar = this.value;

         var url = "/json/amortecedor/"+ar;
     
        $.getJSON(url, function(dadosRetorno){
             try{
                 // Insere os dados em cada campo
                 $("#id_amortecedor_diametro_externo").val(dadosRetorno.amortecedor_diametro_externo);
                 $("#id_amortecedor_curso").val(dadosRetorno.amortecedor_curso);
                 $("#id_amortecedor_diametro_externo").prop('readonly', true);
                 $("#id_amortecedor_curso").prop('readonly', true);
                 if (dadosRetorno.erro) {
                     $("#id_amortecedor_diametro_externo").prop('readonly', false);
                     $("#id_amortecedor_curso").prop('readonly', false);
                 }
             }catch(ex){
             
             }
        });
     });
</script>



{% endblock %}
